<%= javascript_pack_tag 'playlists/playlist_modal' %>

<h2>音源ファイル一覧ページ</h2>

<% if user_signed_in? %>
  <%= link_to "アップロードする", new_sound_post_path %>
<% end %>

<% @sound_posts.each do |sound_post| %>
  <div class="post">
    ▼<%= sound_post.user.profile.name %>が投稿<br >
    <strong><%= link_to sound_post.title, sound_post_path(sound_post.id) %></strong><br >
    <%# 楽器の名前を表示 %>
    楽器：<%= sound_post.instrument.name %><br >
    <audio src="<%= "#{sound_post.sound_source}" %>" controls="">
      <!-- <a src="<%= "#{sound_post.sound_source}" %>">ダウンロード</a> -->
    </audio>

    <div id="add-playlist">
      <%= link_to 'プレイリストに追加', new_sound_post_playlist_path(sound_post_id: sound_post.id), remote: true %>
      <%= react_component("AddPlaylist", {sound_post: sound_post, playlists: current_user.playlists}) %>
    </div>
    <%# モーダルウィンドウ %>
    <div class="mask hidden" id="modal-mask">
      <div class="modal hidden" id="add-in-playlist__modal">
        <p>ここに部分テンプレートが入るよ</p>
        <!--
        <%= render partial: 'sound_post_playlists/new', locals: { sound_post: sound_post, playlists: current_user.playlists } %>
        -->
      </div>
    </div>

    <div id="sound_post_likes_button_<%= sound_post.id %>">
      <%# いいねを部分テンプレートで呼び出し %>
      <%= render partial: 'sound_post_likes/like', locals: { sound_post: sound_post } %>
    </div>
  </div>
<% end %>



<%# モーダルの周囲を薄暗くするマスク %>
<div id="mask" class="modal-mask hidden"></div>
